<!--
  ~ Copyright (c) 2020 - 2021 Hudson Orsine Assumpção.
  ~
  ~ This file is part of Liber UI.
  ~
  ~ Liber UI is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or any later
  ~ version.
  ~
  ~ Liber UI is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with Liber UI.  If not, see <https://www.gnu.org/licenses/>
  -->


<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button></ion-back-button>
        </ion-buttons>
        <ion-title *ngIf="patient?.id">{{'patient-edition.title.edition' | translate}}</ion-title>
        <ion-title *ngIf="!patient?.id">{{'patient-edition.title.creation' | translate}}</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content>
    <ion-list>
        <ion-item>
            <ion-label position="floating">{{'patient-edition.form.full-name.label'| translate}}</ion-label>
            <ion-input #nameInput="ngModel" [(ngModel)]="patient.name" autocomplete="off" disabled
                       id="nameField" maxlength="100" name="nameField">
            </ion-input>
        </ion-item>
        <ion-row>
            <ion-col size="6" size-lg="4">
                <ion-item>
                    <ion-label
                            position="floating">{{'patient-edition.form.birthdate.label'| translate}}</ion-label>
                    <ion-datetime #birthdateInput="ngModel" [(ngModel)]="patient.birthDate" autocomplete="off"
                                  disabled display-format="{{'common.date-format' | translate}}"
                                  id="birthdate" name="birthdate"></ion-datetime>
                </ion-item>
            </ion-col>
            <ion-col size="6" size-lg="4">
                <ion-item>
                    <ion-label position="floating">{{'patient-edition.form.sex.label'| translate}}</ion-label>
                    <ion-select #sexInput="ngModel" [(ngModel)]="patient.sex" autocomplete="off"
                                disabled="" id="sex" name="sex">
                        <ion-select-option value="FEMALE">{{'common.sex.female' | translate}}</ion-select-option>
                        <ion-select-option value="MALE">{{'common.sex.male' | translate}}</ion-select-option>
                    </ion-select>
                </ion-item>
            </ion-col>
            <ion-col size="12" size-lg="4">
                <ion-item>
                    <ion-label
                            position="floating">{{'patient-edition.form.birthplace.label'| translate}}</ion-label>
                    <liber-modal-select #birthplaceInput="ngModel" [(ngModel)]="patient.birthPlaceId"
                                        autocomplete="off" crudServiceClass="CityService"
                                        disabled id="birthplace" name="birthplace"
                                        title="{{'patient-edition.form.birthplace.label'| translate}}">
                    </liber-modal-select>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-item>
            <ion-label position="floating">{{'patient-edition.form.mother-name.label'| translate}}</ion-label>
            <ion-input #motherNameInput="ngModel" [(ngModel)]="patient.motherName" autocomplete="off"
                       disabled id="motherNameInput" maxlength="100" name="motherNameInput">
            </ion-input>
        </ion-item>
        <ion-item>
            <ion-label position="floating">{{'patient-edition.form.father-name.label'| translate}}</ion-label>
            <ion-input #fatherNameInput="ngModel" [(ngModel)]="patient.fatherName" autocomplete="off"
                       disabled id="fatherNameInput" maxlength="100" name="fatherNameInput">
            </ion-input>
        </ion-item>
        <ion-row>
            <ion-col size="12" size-lg="3">
                <ion-item>
                    <ion-label
                            position="floating">{{'patient-edition.form.marital-status.label'| translate}}</ion-label>
                    <liber-modal-select #maritalStatusInput="ngModel" [(ngModel)]="patient.maritalStatusId"
                                        autocomplete="off" crudServiceClass="MaritalStatusService"
                                        disabled id="maritalStatus" name="maritalStatus"
                                        title="{{'patient-edition.form.marital-status.label'| translate}}">
                    </liber-modal-select>
                </ion-item>
            </ion-col>
            <ion-col size="12" size-lg="3">
                <ion-item>
                    <ion-label
                            position="floating">{{'patient-edition.form.scholarity.label'| translate}}</ion-label>
                    <liber-modal-select #scholarityInput="ngModel" [(ngModel)]="patient.scholarityId"
                                        autocomplete="off" crudServiceClass="ScholarityService"
                                        disabled id="scholarity" name="scholarity"
                                        title="{{'patient-edition.form.scholarity.label'| translate}}">
                    </liber-modal-select>
                </ion-item>
            </ion-col>
            <ion-col size="12" size-lg="3">
                <ion-item>
                    <ion-label
                            position="floating">{{'patient-edition.form.profession.label'| translate}}</ion-label>
                    <liber-modal-select #professionInput="ngModel" [(ngModel)]="patient.professionId"
                                        autocomplete="off" crudServiceClass="ProfessionService"
                                        disabled id="profession" name="profession"
                                        title="{{'patient-edition.form.profession.label'| translate}}">
                    </liber-modal-select>
                </ion-item>
            </ion-col>
            <ion-col size="12" size-lg="3">
                <ion-item>
                    <ion-label>{{'patient-edition.form.is-working.label'| translate}}</ion-label>
                    <ion-checkbox [(ngModel)]="patient.working" disabled id="working"
                                  name="working" slot="end"></ion-checkbox>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-item>
            <ion-label position="floating">{{'address.street.label'| translate}}</ion-label>
            <ion-input #streetInput="ngModel" [(ngModel)]="patient.addressStreet" autocomplete="off"
                       disabled id="street" name="street"></ion-input>
        </ion-item>
        <ion-row>
            <ion-col size="12" size-lg="3">
                <ion-item>
                    <ion-label position="floating">{{'address.number.label'| translate}}</ion-label>
                    <ion-input #numberInput="ngModel" [(ngModel)]="patient.addressNumber" autocomplete="off"
                               disabled id="number" name="number"></ion-input>
                </ion-item>
            </ion-col>
            <ion-col size="12" size-lg="9">
                <ion-item>
                    <ion-label position="floating">{{'address.neighborhood.label'| translate}}</ion-label>
                    <ion-input #neighborhoodInput="ngModel" [(ngModel)]="patient.addressNeighborhood"
                               autocomplete="off"
                               disabled id="neighborhood" name="neighborhood"></ion-input>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12" size-lg="4">
                <ion-item>
                    <ion-label position="floating">{{'address.complement.label'| translate}}</ion-label>
                    <ion-input #complementInput="ngModel" [(ngModel)]="patient.addressComplement" autocomplete="off"
                               disabled id="complement" name="complement"></ion-input>
                </ion-item>
            </ion-col>
            <ion-col size="12" size-lg="4">
                <ion-item>
                    <ion-label position="floating">{{'address.zip.label'| translate}}</ion-label>
                    <ion-input #zipInput="ngModel" [(ngModel)]="patient.addressZip" autocomplete="off"
                               disabled id="zip" name="zip"></ion-input>
                </ion-item>
            </ion-col>
            <ion-col size="12" size-lg="4">
                <ion-item>
                    <ion-label position="floating">{{'address.city.label'| translate}}</ion-label>
                    <liber-modal-select #cityInput="ngModel" [(ngModel)]="patient.addressCityId"
                                        autocomplete="off" crudServiceClass="CityService"
                                        disabled id="city" name="city"
                                        title="{{'address.city.label'| translate}}">
                    </liber-modal-select>
                </ion-item>
            </ion-col>
        </ion-row>
    </ion-list>
    <ion-item *ngIf="patient?.id">
        <ion-button [routerLink]="'../../edit/'+patient.id">{{'common.button.edit' | translate}}</ion-button>
        <ion-button
                [routerLink]="'../../'+patient.id+'/report/new'">{{'patients.button.new-report' | translate}}</ion-button>
    </ion-item>
    <ion-list>
        <ion-item *ngFor="let report of items; trackBy: trackById">
            <ion-col>{{report.title}}</ion-col>
            <ion-col>
                <ng-container
                        *ngIf="report.type=='SOCIAL'">{{'patient-report.type.social' | translate}}</ng-container>
                <ng-container
                        *ngIf="report.type=='PSYCHIATRIC'">{{'patient-report.type.psychiatric' | translate}}</ng-container>
                <ng-container
                        *ngIf="report.type=='PSYCHOLOGICAL'">{{'patient-report.type.psychological' | translate}}</ng-container>
                <ng-container
                        *ngIf="report.type=='DENTAL'">{{'patient-report.type.dental' | translate}}</ng-container>
            </ion-col>
            <ion-col>{{report.status}}</ion-col>
            <ion-col>{{report.createdDate}}</ion-col>
            <ion-col>
                <ion-button [routerLink]="'../../'+report.patientId+'/report/'+report.id" color="default" fill="clear">
                    <ion-icon name="eye-outline"></ion-icon>
                </ion-button>
                <ion-button *ngIf="report.authorId===user.id"
                            [routerLink]="'../../'+report.patientId+'/report/'+report.id+'/edit'" color="default"
                            fill="clear">
                    <ion-icon name="create-outline"></ion-icon>
                </ion-button>
            </ion-col>
        </ion-item>
    </ion-list>
</ion-content>
